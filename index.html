<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Counsel Group | تأسيس شركات واستشارات قانونية</title>
    <meta name="description"
        content="Elite Counsel Group - شريكك القانوني الأول لتأسيس الشركات، الجنسية المصرية، والاستشارات القانونية المتخصصة. حلول قانونية متكاملة للأفراد والمستثمرين.">
    <meta name="keywords"
        content="تأسيس شركات, جنسية مصرية, استشارات قانونية, محامي, قضايا أسرة, تحكيم دولي, استثمار في مصر">
    <meta property="og:title" content="Elite Counsel Group | الحلول القانونية المتكاملة">
    <meta property="og:description"
        content="نحميك قانونياً ونبني مستقبلك. خدمات تأسيس الشركات والجنسية والاستشارات القانونية.">
    <meta property="og:url" content="https://elite-counsel-group.web.app">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&family=Tajawal:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>

    <style>
        :root {
            --primary-gold: #D4AF37;
            --dark-bg: #0a0a0a;
            --dark-card: #141414;
            --text-main: #ffffff;
            --text-secondary: #9ca3af;
            --border-color: rgba(255, 255, 255, 0.05);
            --card-bg: rgba(255, 255, 255, 0.03);
            --header-bg: rgba(10, 10, 10, 0.95);
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* Apply Variables */
        .text-gray-400,
        .text-gray-300,
        .text-gray-500 {
            color: var(--text-secondary) !important;
        }

        /* Glassmorphism */
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: var(--primary-gold);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px -10px rgba(212, 175, 55, 0.1);
        }

        /* Views (SPA Routing) */
        .view-section {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .view-section.active {
            display: block;
            opacity: 1;
        }

        /* Loader */
        #loader {
            position: fixed;
            inset: 0;
            background: var(--dark-bg);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--primary-gold);
            border-top: 3px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Modals */
        .modal {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
        }

        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Golden Gradient Text */
        .text-gold-gradient {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Hero Floating Animations */
        @keyframes float {
            0% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-40px) rotate(10deg);
            }

            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }

        @keyframes float-reverse {
            0% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-50px) rotate(-10deg);
            }

            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }

        @keyframes float-slow {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-60px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes float-slower {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-80px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-float-reverse {
            animation: float-reverse 7s ease-in-out infinite;
        }

        .animate-float-slow {
            animation: float-slow 10s ease-in-out infinite;
        }

        .animate-float-slower {
            animation: float-slower 12s ease-in-out infinite;
        }
    </style>
</head>

<body class="selection:bg-yellow-600 selection:text-white">

    <!-- Loader -->
    <div id="loader">
        <div class="spinner"></div>
    </div>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/201000545644" target="_blank"
        class="fixed bottom-8 right-8 w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-white text-3xl shadow-lg hover:bg-green-600 transition z-50 animate-pulse">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 py-4 px-6 md:px-12 flex justify-between items-center glass-card border-b-0 rounded-none bg-[#0a0a0a]/95"
        id="navbar">
        <div class="text-2xl font-bold tracking-tighter flex items-center gap-2 cursor-pointer"
            onclick="router.navigate('home')">
            <i class="fas fa-balance-scale text-yellow-500"></i>
            <div><span class="text-white">Elite Counsel</span><span class="text-yellow-500"> Group</span></div>
        </div>
        <div class="hidden lg:flex space-x-reverse space-x-6 text-sm font-semibold tracking-wide items-center">
            <a href="javascript:router.navigate('home')"
                class="text-gray-300 hover:text-yellow-500 transition">الرئيسية</a>
            <a href="#about" class="text-gray-300 hover:text-yellow-500 transition">من نحن</a>
            <a href="#services-section" class="text-gray-300 hover:text-yellow-500 transition">الخدمات</a>
            <a href="#contact-section"
                class="px-6 py-2 border border-yellow-500 text-yellow-500 rounded-full hover:bg-yellow-500 hover:text-black transition">تواصل
                معنا</a>
        </div>
    </nav>

    <!-- MAIN VIEW: HOME -->
    <div id="view-home" class="view-section active pt-20">

        <!-- 1. Hero Section -->
        <section class="min-h-[90vh] flex items-center justify-center relative px-6 text-center">
            <div class="max-w-4xl relative z-10">
                <div class="flex justify-center mb-6">
                    <img src="logo.jpg" alt="Elite Counsel Group Logo"
                        class="h-32 w-32 md:h-48 md:w-48 object-cover rounded-full border-4 border-yellow-500 shadow-2xl bg-black/50">
                </div>
                <h2 class="text-3xl md:text-5xl font-black text-white mb-2 animate-fade-in-up tracking-widest">Elite
                    Counsel Group</h2>
                <p class="text-yellow-500 text-lg mb-4 font-bold tracking-widest animate-fade-in-up delay-100">حلول
                    قانونية واستثمارية متكاملة</p>
                <h1 class="text-5xl md:text-7xl font-black mb-6 leading-tight text-white animate-fade-in-up delay-100">
                    من أول خطوة…<br><span class="text-gold-gradient">لحد القرار النهائي</span>
                </h1>
                <p class="text-gray-300 text-xl mb-8 max-w-2xl mx-auto font-['Tajawal']">
                    شريكك القانوني الأول لتأسيس الشركات، الجنسية، والاستشارات القانونية المتخصصة.
                </p>
                <div class="flex flex-col md:flex-row justify-center gap-4">
                    <a href="#contact-section"
                        class="px-8 py-4 bg-yellow-500 text-black font-bold rounded-full hover:bg-yellow-400 transition transform hover:-translate-y-1 shadow-lg shadow-yellow-500/20">تواصل
                        معنا الآن</a>
                    <a href="#services-section"
                        class="px-8 py-4 border border-gray-500 text-white font-bold rounded-full hover:border-yellow-500 hover:text-yellow-500 transition">خدماتنا</a>
                </div>
            </div>
            <!-- Background Elements -->
            <div class="absolute inset-0 bg-gradient-to-b from-blue-900/20 to-[#0a0a0a] -z-10"></div>
            <!-- Floating Legal Icons Animation -->
            <div class="absolute top-20 left-10 text-8xl text-yellow-500 opacity-20 animate-float-slow"><i
                    class="fas fa-balance-scale"></i></div>
            <div class="absolute bottom-40 right-10 text-9xl text-yellow-600 opacity-15 animate-float-slower"><i
                    class="fas fa-gavel"></i></div>
            <div class="absolute top-1/3 right-1/4 text-7xl text-yellow-500 opacity-10 animate-float"><i
                    class="fas fa-university"></i></div>
            <div class="absolute bottom-20 left-1/4 text-6xl text-yellow-600 opacity-15 animate-float-reverse"><i
                    class="fas fa-file-contract"></i></div>
        </section>

        <!-- 2. Why Us Strip -->
        <section class="py-12 border-y border-[var(--border-color)] bg-[var(--card-bg)]">
            <div class="max-w-7xl mx-auto px-6">
                <!-- Using grid for responsive layout of Why Us items -->
                <div class="grid grid-cols-2 md:grid-cols-5 gap-8 text-center">
                    <div class="flex flex-col items-center group cursor-default">
                        <i
                            class="fas fa-folder-open text-yellow-500 text-3xl mb-3 group-hover:scale-110 transition"></i>
                        <span class="text-white font-bold text-sm">إدارة كاملة للملف</span>
                    </div>
                    <div class="flex flex-col items-center group cursor-default">
                        <i class="fas fa-users-cog text-yellow-500 text-3xl mb-3 group-hover:scale-110 transition"></i>
                        <span class="text-white font-bold text-sm">فريق متخصص</span>
                    </div>
                    <div class="flex flex-col items-center group cursor-default">
                        <i class="fas fa-eye text-yellow-500 text-3xl mb-3 group-hover:scale-110 transition"></i>
                        <span class="text-white font-bold text-sm">متابعة دقيقة</span>
                    </div>
                    <div class="flex flex-col items-center group cursor-default">
                        <i
                            class="fas fa-user-shield text-yellow-500 text-3xl mb-3 group-hover:scale-110 transition"></i>
                        <span class="text-white font-bold text-sm">سرية تامة</span>
                    </div>
                    <div class="flex flex-col items-center group cursor-default">
                        <i class="fas fa-briefcase text-yellow-500 text-3xl mb-3 group-hover:scale-110 transition"></i>
                        <span class="text-white font-bold text-sm">خبرة استثمارية</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. About Section -->
        <section id="about" class="py-24 px-6 md:px-12 relative overflow-hidden">
            <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center">
                <div class="relative" data-aos="fade-left">
                    <!-- Abstract representation instead of image per user request for "Modern Corporate Legal" style without cartoons -->
                    <div
                        class="relative w-full aspect-[4/3] rounded-2xl overflow-hidden glass-card border border-gray-700 group">
                        <img src="we.jpg" alt="About Elite Counsel Group"
                            class="w-full h-full object-cover transform group-hover:scale-105 transition duration-700">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent">
                        </div>
                        <div class="absolute bottom-6 right-6 text-right">
                            <h3 class="text-2xl font-bold text-white mb-1">Elite Counsel Group</h3>
                        </div>
                    </div>
                </div>
                <div data-aos="fade-right">
                    <h2 class="text-4xl md:text-5xl font-bold mb-8 text-white">من <span
                            class="text-yellow-500">نحن؟</span></h2>
                    <p id="about-text-content" class="text-gray-400 text-lg leading-relaxed mb-6 font-['Tajawal']">
                        Elite Counsel Group شركة متخصصة في تقديم الحلول القانونية المتكاملة، تضم نخبة من المحامين
                        والمستشارين في مختلف التخصصات القانونية، وتعمل على خدمة الأفراد والمستثمرين والشركات من خلال
                        إدارة الملفات القانونية باحتراف من البداية للنهاية.
                    </p>

                    <div class="space-y-4 mb-8">
                        <div>
                            <h4 class="text-white font-bold mb-1">رؤيتنا</h4>
                            <p class="text-gray-500 text-sm">أن نكون الشريك القانوني الموثوق لكل من يسعى لقرارات قانونية
                                آمنة.</p>
                        </div>
                        <div>
                            <h4 class="text-white font-bold mb-1">رسالتنا</h4>
                            <p class="text-gray-500 text-sm">تقديم خدمات قانونية دقيقة، شفافة، قائمة على الخبرة
                                والالتزام.</p>
                        </div>
                    </div>

                    <!-- Leadership Card -->
                    <div class="glass-card p-6 rounded-xl border-r-4 border-yellow-500 flex items-center gap-6">
                        <div class="text-right">
                            <p class="text-white font-bold text-lg mb-1">بقيادة</p>
                            <p class="text-yellow-500 font-bold text-xl mb-1">الدكتور محمد أبو شادي</p>
                            <p class="text-gray-400 text-sm">وفريق قانوني متخصص في كل المجالات</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Dynamic Services Section -->
        <section id="services-section" class="py-24 px-6 relative bg-[#0f0f0f]">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">خدماتنا <span
                            class="text-yellow-500">القانونية</span></h2>
                    <p class="text-gray-400 text-lg">حلول متكاملة لبدء وإدارة أعمالك</p>
                    <div class="h-1 w-24 bg-yellow-500 mx-auto rounded-full mt-4"></div>
                </div>

                <!-- Services Grid (Populated by JS) -->
                <div id="services-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Service Cards will be injected here via JS -->
                    <p class="text-gray-500 col-span-4 text-center">جاري تحميل الخدمات...</p>
                </div>
            </div>
        </section>

        <!-- Dynamic Sections Container -->
        <div id="dynamic-sections-container"></div>

        <!-- 5. CTA Section -->
        <section
            class="py-24 px-6 relative bg-gradient-to-br from-[#0a0a0a] to-[#141414] border-y border-[var(--border-color)] text-center">
            <div class="max-w-4xl mx-auto" data-aos="zoom-in">
                <h2 class="text-3xl md:text-5xl font-bold text-white mb-6">ابدأ صح… وخلي مستقبلك القانوني في أيد أمينة
                </h2>
                <a href="#contact-section"
                    class="inline-block px-10 py-4 bg-yellow-500 text-black font-bold rounded-full hover:bg-yellow-400 transition shadow-lg shadow-yellow-500/20 text-lg">احجز
                    استشارة</a>
            </div>
        </section>

        <!-- 6. Contact Section -->
        <section id="contact-section" class="py-24 px-6 bg-[#0a0a0a]">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl md:text-5xl font-bold text-white mb-8">تواصل معنا</h2>
                <div class="glass-card p-8 rounded-2xl">
                    <form class="space-y-4" onsubmit="event.preventDefault(); sendToWhatsapp()">
                        <div class="grid md:grid-cols-2 gap-4">
                            <input id="contact-name" type="text" placeholder="الاسم"
                                class="w-full p-4 bg-[#021024] border border-gray-700 rounded-lg text-white focus:border-yellow-500 outline-none">
                            <input id="contact-phone" type="text" placeholder="رقم الهاتف"
                                class="w-full p-4 bg-[#021024] border border-gray-700 rounded-lg text-white focus:border-yellow-500 outline-none">
                        </div>
                        <input id="contact-email" type="email" placeholder="البريد الإلكتروني"
                            class="w-full p-4 bg-[#021024] border border-gray-700 rounded-lg text-white focus:border-yellow-500 outline-none">
                        <textarea id="contact-msg" rows="4" placeholder="الرسالة..."
                            class="w-full p-4 bg-[#021024] border border-gray-700 rounded-lg text-white focus:border-yellow-500 outline-none"></textarea>
                        <button type="submit"
                            class="w-full py-4 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition">إرسال</button>
                    </form>

                    <div class="mt-8 flex justify-center gap-8 text-lg">
                        <div class="flex items-center gap-2 text-gray-300">
                            <i class="fas fa-phone text-yellow-500"></i> <span dir="ltr"
                                class="contact-phone-display">01000545644</span>
                        </div>
                        <div class="flex items-center gap-2 text-gray-300">
                            <i class="fab fa-whatsapp text-green-500"></i> <span dir="ltr"
                                class="contact-whatsapp-display">01000545644</span>
                        </div>
                    </div>
                    <div class="mt-4 text-center text-gray-400 text-sm contact-address-display">
                        <!-- Address will be injected here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 7. Footer -->
        <footer class="bg-gradient-to-b from-[#0a0a0a] to-black border-t border-yellow-500/30 pt-16 pb-8 px-6">
            <div class="max-w-7xl mx-auto text-center">
                <div class="mb-8">
                    <div class="text-3xl font-bold tracking-tighter flex items-center justify-center gap-2 mb-4">
                        <i class="fas fa-balance-scale text-yellow-500"></i>
                        <div><span class="text-white">Elite Counsel</span><span class="text-yellow-500"> Group</span>
                        </div>
                    </div>
                    <p class="text-gray-400" id="footer-about-text">حلول قانونية متكاملة</p>
                    <div id="footer-social" class="flex justify-center gap-4 mt-6">
                        <!-- Social Links Injected Here -->
                    </div>
                </div>

                <div class="flex justify-center gap-6 mb-8 text-sm text-gray-300">
                    <a href="javascript:router.navigate('home')" class="hover:text-yellow-500 transition">الرئيسية</a>
                    <a href="#about" class="hover:text-yellow-500 transition">من نحن</a>
                    <a href="#services-section" class="hover:text-yellow-500 transition">الخدمات</a>
                    <a href="#contact-section" class="hover:text-yellow-500 transition">تواصل معنا</a>
                </div>

                <div class="border-t border-gray-800 pt-8">
                    <p class="text-gray-600 text-sm">&copy; 2026 Elite Counsel Group – All Rights Reserved</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- VIEW: SERVICE DETAILS (Text Only) -->
    <div id="view-service" class="view-section pt-24 pb-12 px-6 min-h-screen bg-[#021024]">
        <div class="max-w-4xl mx-auto">
            <button onclick="router.navigate('home')"
                class="mb-8 text-gray-400 hover:text-white flex items-center gap-2 transition">
                <i class="fas fa-arrow-right"></i> عودة للرئيسية
            </button>

            <div class="glass-card p-8 md:p-12 rounded-2xl relative overflow-hidden">
                <div class="absolute top-0 right-0 p-12 opacity-5 pointer-events-none">
                    <i id="detail-bg-icon" class="fas fa-balance-scale text-9xl text-white"></i>
                </div>

                <h1 id="detail-title"
                    class="text-3xl md:text-5xl font-bold text-white mb-8 border-b border-gray-700 pb-6"></h1>

                <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-bold text-yellow-500 mb-4">عن الخدمة</h3>
                        <p id="detail-description" class="text-gray-300 leading-loose text-lg font-['Tajawal']"></p>
                    </div>

                    <div id="steps-container">
                        <h3 class="text-xl font-bold text-yellow-500 mb-4">خطوات العمل</h3>
                        <ul id="detail-steps" class="space-y-4"></ul>
                    </div>
                </div>

                <div class="mt-12 pt-8 border-t border-gray-700 text-center">
                    <a href="https://wa.me/201000545644" target="_blank"
                        class="inline-block px-8 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-500 transition"><i
                            class="fab fa-whatsapp ml-2"></i> تواصل بشأن هذه الخدمة</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Static Modals -->
    <!-- (Optional: keeping these if needed, though not explicitly requested in new prompt) -->

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="firebase-config.js"></script> <!-- Firebase Config -->
    <script>
        AOS.init();

        // --- AUTH ---
        let servicesData = [];
        let currentUser = null;

        const initAuth = async () => {
            try { await auth.signInAnonymously(); } catch (error) { loadServices(); loadSections(); loadSettings(); }
            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    loadServices();
                    loadSections();
                    loadSettings();
                }
            });
        };

        // --- DATA ---
        const loadServices = () => {
            const loader = document.getElementById('loader');
            db.collection('services').orderBy('order', 'asc')
                .onSnapshot(snapshot => {
                    servicesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    // Force re-seed based on new requirement if needed or if empty
                    if (currentUser && servicesData.length === 0 && !localStorage.getItem('seeded_v2')) { seedInitialData(); }
                    renderServicesGrid();
                    loader.style.display = 'none';
                }, error => { loader.style.display = 'none'; });
        };

        const seedInitialData = async () => {
            if (!currentUser) return;
            // 8 Specific Services
            const initialServices = [
                {
                    title: 'الجنسية المصرية للأجانب',
                    desc: 'إدارة كاملة لملف الجنسية حتى صدور القرار النهائي.',
                    fullDesc: 'نقدم خدمة متكاملة للأجانب الراغبين في الحصول على الجنسية المصرية، سواء عن طريق الاستثمار أو طرق أخرى، مع متابعة دقيقة لكافة الإجراءات القانونية والأمنية.',
                    icon: 'fas fa-passport',
                    steps: ['تقديم الطلب', 'متابعة الجهات المعنية', 'استلام القرار'],
                    order: 1
                },
                {
                    title: 'الإقامة الاستثمارية',
                    desc: 'استخراج وتجديد إقامة المستثمر وربطها بتأسيس كيان قانوني.',
                    fullDesc: 'نساعد المستثمرين في الحصول على الإقامات الاستثمارية من خلال هيئة الاستثمار، ونقوم بكافة الخطوات لتأسيس الكيان القانوني اللازم للحصول عليها.',
                    icon: 'fas fa-id-card-alt',
                    steps: ['تأسيس الشركة', 'تقديم ملف الإقامة', 'استلام البطاقة'],
                    order: 2
                },
                {
                    title: 'تأسيس الشركات والقانون التجاري',
                    desc: 'تأسيس – تراخيص – ضرائب – تأمينات – عقود.',
                    fullDesc: 'خدمة شاملة لتأسيس جميع أنواع الشركات (أموال، أشخاص، فردية) وإنهاء كافة إجراءات التراخيص والسجل التجاري والبطاقة الضريبية.',
                    icon: 'fas fa-building',
                    steps: ['المشورة القانونية', 'توثيق العقود', 'استخراج التراخيص'],
                    order: 3
                },
                {
                    title: 'القضايا المدنية والتعويضات',
                    desc: 'نزاعات – مطالبات مالية – قضايا عقارية – تعويضات.',
                    fullDesc: 'تمثيل قانوني قوي في كافة القضايا المدنية، بما في ذلك نزاعات العقود، المطالبات المالية، وقضايا التعويضات بمختلف أنواعها.',
                    icon: 'fas fa-gavel',
                    steps: ['دراسة الملف', 'رفع الدعوى', 'الترافع والتنفيذ'],
                    order: 4
                },
                {
                    title: 'القضايا الجنائية',
                    desc: 'الدفاع في الجنايات والجنح وتحليل الأدلة.',
                    fullDesc: 'دفاع متخصص في القضايا الجنائية، مع فريق خبير في تحليل الأدلة والمرافعات لضمان أفضل موقف قانوني للموكل.',
                    icon: 'fas fa-handcuffs',
                    steps: ['حضور التحقيقات', 'دراسة القضية', 'المرافعة أمام المحكمة'],
                    order: 5
                },
                {
                    title: 'قضايا مجلس الدولة والقضاء الإداري',
                    desc: 'طعون – حقوق وظيفية – معاشات – تعويضات.',
                    fullDesc: 'رفع الطعون أمام مجلس الدولة لاسترداد الحقوق الوظيفية، تسوية المعاشات، والمطالبة بالتعويضات من الجهات الإدارية.',
                    icon: 'fas fa-university',
                    steps: ['تقديم التظلم', 'رفع الدعوى', 'متابعة الحكم'],
                    order: 6
                },
                {
                    title: 'قضايا الأسرة والزواج',
                    desc: 'طلاق – نفقة – حضانة – رؤية – نسب.',
                    fullDesc: 'معالجة قضايا الأسرة بخصوصية تامة، تشمل الطلاق، الخلع، النفقات، الحضانة، وإثبات النسب، مع مراعاة الجوانب الإنسانية.',
                    icon: 'fas fa-users',
                    steps: ['محاولة الصلح', 'رفع الدعوى', 'تنفيذ الحكم'],
                    order: 7
                },
                {
                    title: 'التحكيم التجاري الدولي',
                    desc: 'نزاعات استثمارية – عقود دولية – تنفيذ أحكام تحكيم.',
                    fullDesc: 'فض النزاعات التجارية والاستثمارية عن طريق التحكيم، وصياغة عقود التجارة الدولية بما يحفظ حقوق الشركات والمستثمرين.',
                    icon: 'fas fa-globe',
                    steps: ['صياغة شرط التحكيم', 'إدارة جلسات التحكيم', 'تنفيذ الحكم'],
                    order: 8
                }
            ];

            const batch = db.batch();
            // Note: In a real app we might verify redundancy, here we assume clean slate or overwrite logic if needed.
            // But since we use auto-id, let's just add them.
            // If we want to clean first, we'd need to delete. 
            // For now, let's just mark seeded_v2 so we don't duplicate on reload.
            initialServices.forEach(s => { const docRef = db.collection('services').doc(); batch.set(docRef, s); });
            await batch.commit();
            localStorage.setItem('seeded_v2', 'true');
        };

        // --- DYNAMIC SECTIONS & SETTINGS ---
        const loadSections = async () => {
            const container = document.getElementById('dynamic-sections-container');
            db.collection('sections').orderBy('order', 'asc').onSnapshot(snapshot => {
                container.innerHTML = '';
                snapshot.forEach(doc => {
                    const section = { id: doc.id, ...doc.data() };
                    renderSection(section, container);
                });
            });
        };

        const renderSection = async (section, container) => {
            const sectionDiv = document.createElement('section');
            sectionDiv.className = 'py-20 px-6 bg-[#0a0a0a] relative border-t border-gray-900';
            sectionDiv.innerHTML = `
                <div class="max-w-7xl mx-auto">
                    <div class="text-center mb-12" data-aos="fade-up">
                        <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">${section.title}</h2>
                        <div class="h-1 w-16 bg-yellow-500 mx-auto rounded-full"></div>
                    </div>
                    <div id="section-items-${section.id}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Items Loaded Here -->
                        <div class="col-span-3 text-center text-gray-500">جاري تحميل المحتوى...</div>
                    </div>
                </div>
            `;
            container.appendChild(sectionDiv);

            // Load Items for this section
            const itemsSnapshot = await db.collection('section_items').where('sectionId', '==', section.id).orderBy('order', 'asc').get();
            const itemsContainer = document.getElementById(`section-items-${section.id}`);

            if (itemsSnapshot.empty) {
                itemsContainer.innerHTML = '<p class="col-span-3 text-center text-gray-500">لا يوجد محتوى في هذا القسم حالياً.</p>';
                return;
            }

            itemsContainer.innerHTML = itemsSnapshot.docs.map(doc => {
                const item = doc.data();
                if (item.type === 'video') {
                    // Simple Video Embed/Link
                    return `
                        <div class="glass-card rounded-xl overflow-hidden group hover:border-yellow-500/50 transition">
                            <div class="aspect-video bg-black relative flex items-center justify-center">
                                ${item.url.includes('youtube') || item.url.includes('vimeo')
                            ? `<iframe src="${item.url}" class="w-full h-full" frameborder="0" allowfullscreen></iframe>`
                            : `<video src="${item.url}" controls class="w-full h-full object-cover"></video>`
                        }
                            </div>
                            ${item.desc ? `<div class="p-4"><p class="text-gray-300 text-sm text-center">${item.desc}</p></div>` : ''}
                        </div>
                    `;
                } else {
                    // Image
                    return `
                        <div class="glass-card rounded-xl overflow-hidden group relative hover:border-yellow-500/50 transition">
                            <div class="aspect-[4/3] overflow-hidden">
                                <img src="${item.url}" alt="${item.desc || section.title}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700">
                            </div>
                            ${item.desc ? `
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/80 to-transparent p-6 translate-y-full group-hover:translate-y-0 transition duration-300">
                                <p class="text-white text-center font-bold">${item.desc}</p>
                            </div>` : ''}
                        </div>
                    `;
                }
            }).join('');
        };

        const loadSettings = () => {
            db.collection('settings').doc('main').onSnapshot(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    // Update Contact Info in Contact Section
                    if (data.phone) {
                        // We need to add classes or IDs to elements in contact section to target them
                        // For now let's hope I can find them or I will update the HTML next tool call
                        const phoneEls = document.querySelectorAll('.contact-phone-display');
                        phoneEls.forEach(el => el.innerText = data.phone);
                    }
                    if (data.address) {
                        // Assuming I add class later
                    }

                    // Update Social Links (Footer)
                    // Checks if we have social div
                }
            });
        };

        // --- ROUTER ---
        const router = {
            currentView: 'home',
            navigate: (viewName, params = null) => {
                document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                const view = document.getElementById(`view-${viewName}`);
                if (view) { view.classList.add('active'); router.currentView = viewName; window.scrollTo(0, 0); }
                if (viewName === 'service' && params) renderServiceDetail(params);
            }
        };

        // --- RENDER ---
        const renderServicesGrid = () => {
            const grid = document.getElementById('services-grid');
            if (servicesData.length === 0) { grid.innerHTML = '<p class="text-center text-gray-500 w-full col-span-4 py-10">لا توجد خدمات متاحة حالياً.</p>'; return; }
            grid.innerHTML = servicesData.map(s => `
                <div class="glass-card p-8 rounded-2xl text-center group cursor-pointer relative overflow-hidden flex flex-col items-center h-full" onclick="router.navigate('service', '${s.id}')">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-yellow-500 to-transparent transform scale-x-0 group-hover:scale-x-100 transition duration-500"></div>
                    <div class="w-20 h-20 bg-[#021024] border border-gray-700 rounded-full flex items-center justify-center mb-6 text-yellow-500 text-3xl group-hover:bg-yellow-500 group-hover:text-black transition duration-300 shadow-lg shadow-black/50">
                        <i class="${s.icon || 'fas fa-star'}"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3 group-hover:text-yellow-500 transition">${s.title}</h3>
                    <p class="text-gray-400 text-sm mb-6 leading-relaxed flex-grow">${s.desc}</p>
                    <span class="text-yellow-500 text-sm font-bold flex items-center justify-center gap-1 group-hover:gap-2 transition-all mt-auto">المزيد من التفاصيل <i class="fas fa-arrow-left"></i></span>
                </div>
            `).join('');
        };

        const renderServiceDetail = (id) => {
            const service = servicesData.find(s => s.id === id);
            if (!service) return router.navigate('home');
            document.getElementById('detail-title').innerText = service.title;
            // No image text
            document.getElementById('detail-description').innerText = service.fullDesc || service.desc;
            document.getElementById('detail-bg-icon').className = `${service.icon} text-9xl text-white`;

            const stepsContainer = document.getElementById('detail-steps');
            const steps = Array.isArray(service.steps) ? service.steps : (service.steps ? service.steps.split(',') : []);

            if (steps.length > 0) {
                document.getElementById('steps-container').classList.remove('hidden');
                stepsContainer.innerHTML = steps.map((step, index) => `
                    <li class="flex items-start gap-4 p-4 glass-card rounded-xl">
                        <div class="w-8 h-8 rounded-full bg-yellow-500 text-black flex items-center justify-center font-bold text-sm flex-shrink-0 shadow-lg">${index + 1}</div>
                        <span class="text-gray-200 text-base font-medium">${step}</span>
                    </li>
                `).join('');
            } else {
                document.getElementById('steps-container').classList.add('hidden');
            }
        };

        function sendToWhatsapp() {
            const n = document.getElementById('contact-name').value;
            const p = document.getElementById('contact-phone').value;
            const e = document.getElementById('contact-email').value;
            const m = document.getElementById('contact-msg').value;

            const msgBody = `*طلب استشارة جديد*%0aالاسم: ${n}%0aالهاتف: ${p}%0aالايميل: ${e}%0aالرسالة: ${m}`;
            window.open(`https://wa.me/201000545644?text=${msgBody}`, '_blank');
        }

        initAuth();
    </script>
</body>

</html>